---
import { ts, type Locale } from "../../i18n";
import { icons, type IconName } from "../../assets/icons";

interface Props {
  locale: Locale;
}

const { locale } = Astro.props;

const features: {
  titleKey: string;
  descKey: string;
  badgeKey?: string;
  bg: string;
  text: string;
  badgeBg?: string;
  badgeText?: string;
  icon: IconName;
}[] = [
  {
    titleKey: "featurePushTitle",
    descKey: "featurePushDesc",
    badgeKey: "featurePushBadge",
    bg: "bg-accent-light",
    text: "text-accent",
    badgeBg: "bg-accent-light",
    badgeText: "text-accent",
    icon: "zap",
  },
  {
    titleKey: "feature2wayTitle",
    descKey: "feature2wayDesc",
    badgeKey: "feature2wayBadge",
    bg: "bg-plum-light",
    text: "text-plum",
    badgeBg: "bg-plum-light",
    badgeText: "text-plum",
    icon: "repeat",
  },
  {
    titleKey: "featureGitTitle",
    descKey: "featureGitDesc",
    bg: "bg-emerald-light",
    text: "text-emerald",
    icon: "fileText",
  },
  {
    titleKey: "featureSummaryTitle",
    descKey: "featureSummaryDesc",
    bg: "bg-sky-light",
    text: "text-sky",
    icon: "filePlus",
  },
  {
    titleKey: "featureSecurityTitle",
    descKey: "featureSecurityDesc",
    bg: "bg-feat-icon",
    text: "text-txt",
    icon: "lock",
  },
];
---

<section class="sect-section py-20" id="features">
  <div class="mb-12">
    <p class="text-[0.72rem] font-bold uppercase tracking-[0.14em] text-accent mb-2">{ts(locale, "featuresLabel")}</p>
    <h2 class="text-[clamp(1.5rem,3vw,2rem)] font-bold tracking-tight mb-2">{ts(locale, "featuresTitle")}</h2>
  </div>

  <div class="flex flex-col">
    {features.map((feat, idx) => (
      <div class:list={["grid grid-cols-[48px_1fr] gap-5 items-start py-7", idx < features.length - 1 ? "border-b border-border" : ""]}>
        <div class:list={["w-12 h-12 rounded-xl flex items-center justify-center", feat.bg, feat.text]}>
          <span class="w-[22px] h-[22px]" set:html={icons[feat.icon]} />
        </div>
        <div>
          <h3 class="text-base font-bold mb-1 flex items-center gap-2">
            <span>{ts(locale, feat.titleKey)}</span>
            {feat.badgeKey && (
              <span class:list={["text-[0.6rem] font-bold px-[7px] py-0.5 rounded uppercase tracking-wider", feat.badgeBg, feat.badgeText]}>
                {ts(locale, feat.badgeKey)}
              </span>
            )}
          </h3>
          <p class="text-[0.88rem] text-txt-2 leading-relaxed">{ts(locale, feat.descKey)}</p>
        </div>
      </div>
    ))}
  </div>
</section>
